version: 2.1

orbs:
  path-filtering: circleci/path-filtering@1.2.1

setup: << pipeline.parameters.run-setup >>

parameters:
  run-setup:
    type: boolean
    default: true
    
workflows:
  pre:
    when: << pipeline.parameters.run-setup >>
    jobs:
      - path-filtering/filter:
          checkout: false
          config-path: .circleci/continuation.yml
          tag: '3.9.0'
          # 3-column space-separated table for mapping; `path-to-test parameter-to-set value-for-parameter` for each row
          mapping: |
            .* run-setup false
            server/.* build_hypgames true
            mobile/client/Assets/PoolPrototype/BallPoolGame/Game/Scripts/Mechanics/.* build_hypgames true
            devdash/.* build_hypgames true
