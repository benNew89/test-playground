version: 2.1

orbs:
  path-filtering: circleci/path-filtering@1.2.0

setup: << pipeline.parameters.run-setup >>

parameters:
  run-setup:
    type: boolean
    default: true
    
workflows:
  pre:
    jobs:
      - path-filtering/filter:
          base-revision: << pipeline.git.base_revision >>
          tag: '3.8.14'
          ## Config for continuation; herein we reuse this config itself
          config-path: .circleci/continuation.yml
          # 3-column space-separated table for mapping; `path-to-test parameter-to-set value-for-parameter` for each row
          mapping: |
            .* run-setup false
            server/.* build_hypgames true
            mobile/client/Assets/PoolPrototype/BallPoolGame/Game/Scripts/Mechanics/.* build_hypgames true
            devdash/.* build_hypgames true
